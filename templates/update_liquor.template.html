{%extends 'layout.template.html' %}

{%block content%}
<h2>Edit liquor</h2>
<form method="POST">

    <div class="form-group">
        <label>Liquor name:</label>
        <input type="text" class="form-control" name="liquor_name" value="{{liquor.name}}"/>
    </div>

    <div class="form-group">
        <label>Liquor type:</label>
        <input type="text" class="form-control" name="liquor_type" value="{{liquor.type}}"/>
    </div>

    <div class="form-group">
        <label>Primary alcohol:</label>
        <input type="text" class="form-control" name="primary_alcohol" value="{{liquor.primary_alcohol}}"/>
    </div>

    <div class="form-group">
        <label>Serving method:</label>
        <input type="text" class="form-control" name="serving_method" value="{{liquor.serving_method}}"/>
    </div>

    <div class="form-group">
        <label>Standard drinkware:</label>
        <input type="text" class="form-control" name="standard_drinkware" value="{{liquor.standard_drinkware}}"/>
    </div>

    <div>
        <label>Ingredients:</label>
        <input type="text" name="ingredients" class="form-control" value="{{liquor.ingredients}}"/>
    </div>

    <div>
        <label>Preparation:</label>
        <input type="text" name="preparation" class="form-control" value="{{liquor.preparation}}"/>
    </div>

    <br>

    <div>
        <a id="upload_widget" class="cloudinary-button">Upload files</a>
        <input type="hidden" id="uploaded_file_url" name="uploaded_file_url"/>
        <br/>
        <img src="{{liquor.uploaded_file_url}}" id="uploaded-image">
    </div>

    <br>

    <input type="submit" class="btn btn-primary"/>

</form>

{%endblock%}

{%block js %}
	<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

	<script type="text/javascript">
		var myWidget = cloudinary.createUploadWidget({
            cloudName: '{{cloud_name}}', 
            uploadPreset: '{{upload_preset}}'}, (error, result) => { 
                if (!error && result && result.event === "success") { 
                    console.log('Done! Here is the image info: ', result.info); 
                    let fileURL = document.querySelector('#uploaded_file_url');
                    fileURL.value = result.info.url;

                    document.querySelector('#uploaded-image').src = result.info.url
                }
            }
        )

        document.getElementById("upload_widget").addEventListener("click", function(){
                myWidget.open();
        }, false);
	</script>
{%endblock%}